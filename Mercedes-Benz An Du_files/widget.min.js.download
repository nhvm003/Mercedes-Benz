require=function t(e,i,n){function o(a,s){if(!i[a]){if(!e[a]){var d="function"==typeof require&&require;if(!s&&d)return d(a,!0);if(r)return r(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var c=i[a]={exports:{}};e[a][0].call(c.exports,function(t){var i=e[a][1][t];return o(i||t)},c,c.exports,t,e,i,n)}return i[a].exports}for(var r="function"==typeof require&&require,a=0;a<n.length;a++)o(n[a]);return o}({1:[function(t,e,i){e.exports={requireGa:function(){var t,e,i,n,o,r;window.ga||(t=window,e=document,i="script",n="ga",t.GoogleAnalyticsObject=n,t.ga=t.ga||function(){(t.ga.q=t.ga.q||[]).push(arguments)},t.ga.l=1*new Date,o=e.createElement(i),r=e.getElementsByTagName(i)[0],o.async=1,o.src="https://www.google-analytics.com/analytics.js",r.parentNode.insertBefore(o,r))}}},{}],2:[function(t,e,i){var n,o,r,a;n=window.$,t("infinite-swipe"),(a=t("./itemManager.coffee")).omitItem,r=a.handleImgErr,o=function(){function t(t){var e,i,n;this.options=t,null==(e=this.options).total&&(e.total=Number(this.options.$wrap.attr("data-total"))),null==(i=this.options).item_total&&(i.item_total=Number(this.options.$wrap.attr("data-item_total"))),null==(n=this.options).item_count&&(n.item_count=Number(this.options.$wrap.attr("data-item_count"))),this.initSwipe(this.options.$wrap),this.initThumbnailChecker(this.options.$wrap)}return t.prototype.options={$wrap:null,total:null,item_total:null,item_count:null,onPage:null},t.prototype.onPage=function(t){return this.options.onPage=t},t.prototype.onExpose=function(){var t,e;if(!this._exposed)return this._exposed=!0,t=this.options.$wrap,e=Number(t.attr("data-autoswipe_seconds")),"true"!==t.attr("data-infinitefeed")&&this.options.total>1&&e>0?t.find(".list").infiniteSwipe("initAutoswipe",e):void 0},t.prototype.initSwipe=function(t){var e,i;return"true"!==t.attr("data-infinitefeed")&&this.options.total>1?(e={$target_wrap:t.find(".target-wrap"),$target:t.find(".target"),total:this.options.total,$prev:t.find(".prev"),$next:t.find(".next"),$curr:t.find(".current-page"),infinite:!(navigator.userAgent.indexOf("Chrome/85")>-1||navigator.userAgent.indexOf("CriOS/85")>-1)&&"true"===t.attr("data-infinite"),animation_type:t.attr("data-animation_type"),$autoswipe_pause_el:t,onPage:(i=this,function(t){if(i.setPage(t),i.options.onPage)return i.options.onPage(t)})},n(".recommendations").hasClass("isDableAdFixedPagingTestEl")&&(e.transition_ms=0),t.find(".list").infiniteSwipe("destroy").infiniteSwipe(e)):t.find(".prev, .next").addClass("disabled"),this.setPage(1)},t.prototype.initThumbnailChecker=function(t){var e;return t.find(".target"),(e=t.find(".target:not(.infinite-swipe-target-clone)")).find("img.thumbnail").on("error",r),e.find("img[err]").each(r)},t.prototype.setPage=function(t){var e,i,o,r,a,s;if(s=this,(i=(e=this.options.$wrap).find(".page-positions")).length>0){for(i.html("").data("page",t),o=r=0,a=this.options.total;0<=a?r<a:r>a;o=0<=a?++r:--r)i.append(n("<span class='page-position' data-page='"+(o+1)+"'><span class='page-position-num' data-page='"+(o+1)+"'>"+(o+1)+"</span></span>"));i.find(".page-position").eq(t-1).addClass("current"),i.find(".page-position").on("click",function(){return t=n(this).data("page"),e.find(".list").trigger("swipe_page",t),s.setPage(t)})}return e.trigger("page",t)},t}(),e.exports=o},{"./itemManager.coffee":10,"infinite-swipe":"infinite-swipe"}],3:[function(t,e,i){var n,o,r,a,s,d,u,c,l,f,p,h,m,g,_,v,w,x,b,y,k;n=window.$,r=t("./thumbnailManager.coffee").adjustImgSizeContain,d=t("./frameSynchronizer.coffee"),k=t("./util.js"),m=t("./tabManager.coffee").initTabTitle,y=function(t){var e,i,n,o,r;return n=t.content_name,e=t.content_category,i=t.content_id,o=encodeURIComponent,(r=document.createElement("img")).src="https://www.facebook.com/tr?id=481869948690673&ev=ViewContent&cd[content_name]="+o(n)+"&cd[content_category]="+o(e)+"&cd[content_type]=product&cd[content_ids]="+o(i),r.width="1",r.height="1",r.style="display:none",document.body.appendChild(r)},w=function(t){var e,i,n,o,r,a,s,d,u,c,l,f,p;for(u=(f=(null!=t?t.split("/"):void 0)||[])[4],e=f[8],i=f[10],c={},n=0,r=(l=(null!=t&&null!=(a=t.split("?"))&&null!=(s=a[1])?s.split("&"):void 0)||[]).length;n<r;n++)o=(d=l[n].split("="))[0],p=d[1],c[o]=p;return{content_name:u,content_category:c.channel,content_id:e+"-"+i}},x=function(t,e){var i;return(i=new Image).src=t,n(i).on("load",function(){return e(i.width||0)})},u=function(t,e){var i,n,o,r,a,s,d,u;for(a in s=e.service_name,u=e.widget_id,r=e.channel,i=e.ad_default_request_id,n=e.ad_req,o="https://sp-api.dable.io/services/"+encodeURIComponent(s)+"/users/"+n.uid+"/campaigns/"+t.campaign_id+"/contents/"+t.content_id+"/click_redirect?method="+t.method+"&expired="+encodeURIComponent(Date().toString())+"&channel="+encodeURIComponent(r)+"&widget_id="+u+"&request_id="+i+"&rtb_cpc=0",n)d=n[a],"uid"!==a&&"user_info"!==a&&d&&(o+="&"+a+"="+encodeURIComponent(d));return o},l=function(t,e){var i,n,o,r,a,s,d,u;for(a in s=e.service_name,u=e.widget_id,o=e.channel,i=e.ad_default_request_id,n=e.ad_req,r="https://sp-api.dable.io/services/"+encodeURIComponent(s)+"/users/"+n.uid+"/campaigns/"+t.campaign_id+"/contents/"+t.content_id+"/request?method="+t.method+"&expired="+encodeURIComponent(Date().toString())+"&channel="+encodeURIComponent(o)+"&widget_id="+u+"&request_id="+i,delete n.uid,delete n.user_info,n)d=n[a],("uid"!==a&&"user_info"!==a||d)&&(r+="&"+a+"="+encodeURIComponent(d));return r},c=function(t,e){var i,n,o,r,a,s,d,u;for(a in s=e.service_name,u=e.widget_id,o=e.channel,i=e.ad_default_request_id,n=e.ad_req,r="https://sp-api.dable.io/services/"+encodeURIComponent(s)+"/users/"+n.uid+"/campaigns/"+t.campaign_id+"/contents/"+t.content_id+"/expose?method="+t.method+"&expired="+encodeURIComponent(Date().toString())+"&channel="+encodeURIComponent(o)+"&widget_id="+u+"&request_id="+i,delete n.uid,delete n.user_info,n)d=n[a],("uid"!==a&&"user_info"!==a||d)&&(r+="&"+a+"="+encodeURIComponent(d));return r},v=function(t){return k.logByHiddenImg("//sp-api.dable.io/util/count?k=criteo_id_"+t+"&is_gif=1")},s=function(t){if(t)return t.find(".category").remove(),t.find(".author").remove(),t.find(".published_time").remove()},o=function(t){var e,i,n,o;if(null==t&&(t={}),i={TEXT:"text",BOX:"box",CLIENT_NAME:"client_name",CUSTOM:"custom"},"A&#x200b;D",e=t.$el,n=t.ad_box_type,o=t.sp_mark_custom,e&&n)return n===i.TEXT||n===i.CUSTOM?e.find(".sp-mark, .sp-mark-v2").html("A&#x200b;D"):n===i.BOX?e.find(".sp-mark-box").html("A&#x200b;D"):n===i.CLIENT_NAME?e.find(".sp-mark-v2").html('<div class="sp-mark-custom">'+o+"</div>"):void 0},g=function(t,e){var i,a,f,p,h,g,_,w,b;return e.service_name,a=e.ad_exposelog_links,f=e.ad_implog_links,p=e.ad_size,_=e.lang,i=e.ad_box_type,g=!1,"id"===_&&v("request"),w=function(h){var w,b,y,$,C,T,O,I,M,S,D,E,A,q;if(!g)return(E=null!=h&&null!=(I=h[0])?I.nativePayload:void 0)&&(null!=E&&null!=(M=E.products)?M[0]:void 0)?(S=E.products[0],q=S.title,b=S.description,S.price,w=S.click_url,y=S.image,C=E.impression_pixels,O=E.privacy,A=(null!=(D=E.advertiser)?D.description:void 0)||"A&#x200b;D",T=t.method,$=y.url,x($,function(h){var g,x,$,I,M,S,D,E,z,P;if(!(h<=100)){if(g=0,n(".target:not([data-infinitefeed])").each(function(){var a,d,c,l,f;if(0!==!(a=n(this).find(".item[data-criteo_slot]")).length)return g=a.attr("data-ad_idx")||0,a.find(".name").text(q),a.find(".description").text(b),a.find(".sp-mark-custom").html(A),a.find(".tab-title").html("A&#x200b;D"),a.find(".thumbnail-wrap").addClass("img-size-contain"),(d=a.find(".thumbnail")).attr("data-org-src")?d.attr("data-org-src",y.url):(d.attr("src",y.url),r(d)),s(a),a.attr("data-ad_id")?c=a.find("a").attr("href").replace(/campaigns\/[^\/]+/,"campaigns/"+t.campaign_id).replace(/contents\/[^\/]+/,"contents/"+t.content_id).replace(/method=[^\&]+/,"method="+T)+"&custom_link_url="+encodeURIComponent(w):(a.attr("data-ad_id","ad_"+t.campaign_id+"_"+t.content_id+"_"+a.attr("data-idx")).find(".sp-mark, .sp-mark-v2, .sp-mark-box").removeClass("hidden"),a.addClass("item-sp"),c=u(t,e)+"&custom_link_url="+encodeURIComponent(w),m(),o({$el:a,ad_box_type:i,sp_mark_custom:A})),-1===c.indexOf("method=")&&(c+="&method="+T),a.find("a").attr("href",c).attr("target","_blank"),O?(l=a.find(".sp-crit-mark"),f=function(t){return t.preventDefault(),window.open(O.optout_click_url,"new_window")},l.click(f),l.keydown(function(t){if(13===t.keyCode)return f(t)}),l.removeClass("hidden")):void 0}),I=f.length?[((null!=(z=f[g])?z[0]:void 0)||f[g]).replace(/campaigns\/[^\/]+/,"campaigns/"+t.campaign_id).replace(/contents\/[^\/]+/,"contents/"+t.content_id).replace(/method=[^\&]+/,"method="+T)]:[l(t,e)],x=a.length?[((null!=(P=a[g])?P[0]:void 0)||a[g]).replace(/campaigns\/[^\/]+/,"campaigns/"+t.campaign_id).replace(/contents\/[^\/]+/,"contents/"+t.content_id).replace(/method=[^\&]+/,"method="+T)]:[c(t,e)],-1===I[0].indexOf("method=")&&(I[0]+="&method="+T),-1===x[0].indexOf("method=")&&(x[0]+="&method="+T),g<p)for($=0,S=C.length;$<S;$++)E=C[$],k.logByHiddenImg(E.url);else for(M=0,D=C.length;M<D;M++)E=C[M],x.push(E.url);return f[g]=I,a[g]=x,d.setAdExchangeFilled()}"id"===_&&v("toosmallimage")})):(d.setAdExchangeFilled(),void("id"===_&&v("nodata")));"id"===_&&v("timeout")},b="id"===_?5e3:2e3,null==window.Criteo&&(window.Criteo={}),null==(h=window.Criteo).events&&(h.events=[]),Criteo.events.push(function(){return Criteo.RequestBids({placements:[{slotid:"native-ad-unit-"+t.zoneid,zoneid:t.zoneid,nativeCallback:function(t){}}]},w,b)}),setTimeout(function(){return g=!0,d.setAdExchangeFilled()},b)},_=!1,b=function(){var t;if(!_)return(t=document.createElement("script")).type="text/javascript",t.src="//static.criteo.net/js/ld/publishertag.js",t.async="async",document.getElementsByTagName("head")[0].appendChild(t),_=!0},h=function(t){var e,i;if(i=t.crit,t.widget_id,t.service_name,t.service_type,t.ad_exposelog_links,e=t.cookieoff,t.ad_size,t.lang,t.ad_box_type,!(!i||e||window.location.search.indexOf("&ad_campaign_id=")>-1))return b(),g(i,t);d.setAdExchangeFilled()},a=function(t,e,i){var n,o,r,a,s,d,u;if(!e.data("_cd"))return e.data("_cd",1),n=e.parents(".item"),d=t.pageX,u=t.pageY,r=d-n.offset().left,a=u-n.offset().top,o=e.attr("href")+"&item_x="+r+"&item_y="+a+"&widget_x="+d+"&widget_y="+u,s=(new Date).valueOf(),i.request&&(o+="&from_request_ms="+(s-i.request)),i.expose&&(o+="&from_expose_ms="+(s-i.expose)),e.attr("href",o)},p=function(){var t;return t=[{request:(new Date).valueOf(),expose:null}],n(window).on("expose",function(){return t[0].expose=(new Date).valueOf()}),n(".recommendations").on("page",function(e,i){var n;if(!t[i-1])return n=(new Date).valueOf(),t[i-1]={request:n,expose:n}}),n("body").on("click",".item-sp a",function(e){var i,o;return i=n(this).attr("href"),o=Number(n(this).parents("[data-page]").data("page")),y(w(i)),a(e,n(this),t[o-1]||{})})},f=function(t){return h(t),p()},e.exports={init:f}},{"./frameSynchronizer.coffee":7,"./tabManager.coffee":16,"./thumbnailManager.coffee":17,"./util.js":18}],4:[function(t,e,i){var n=t("./util");function o(t){window.ReportingObserver&&new window.ReportingObserver(function(e){if(function(t){return!(!t.length||!t[0].body)&&"HeavyAdIntervention"===t[0].body.id}(e)){var i=function(){var t=document.querySelectorAll(".item"),e={};return Array.from(t).forEach(function(t){var i,n=t.dataset.item_id;if(n&&!e[n]){var o=(null===(i=t.querySelector("img"))||void 0===i?void 0:i.src)||"";"https://static.dable.io/static/i/f6f6f6.gif"===o||(e[n]={item_id:n,src:o})}}),Object.values(e)}();if(i.length)!function(t){var e="".concat(n.getProtocol(),"//").concat(n.api_server_domain(),"/widget_issue/heavy_ad_block/block");window.$.ajax({method:"POST",url:e,data:t})}({options:t,items:i})}},{buffered:!0}).observe()}e.exports={init:function(t){o(t)}}},{"./util":18}],5:[function(t,e,i){var n,o,r,a,s,d,u,c,l,f,p,h,m,g,_,v;n=window.$,t("./frameSynchronizer.coffee"),h=t("./itemManager.coffee").omitItem;try{v=window.localStorage}catch(t){t,v=null}_=function(t){return function(e,i){if(v)return v.setItem(t+":"+e,i.join("|||"))}},u=(l=function(t){return function(e){var i;return v&&(i=v.getItem(t+":"+e)),(null!=i?i.length:void 0)?i.split("|||"):[]}})("dable_block_item"),g=_("dable_block_item"),d=l("dable_block_ad"),m=_("dable_block_ad"),a=function(t){var e,i,o,r,a;return a=t.service_name,e=t.$wrap,o=u(a),i=d(a),0===o.length&&0===i.length?e:(r=[],e.find(".item").filter(function(t,e){var i;return!(!(i=e.className)||-1!==r.indexOf(i))&&(r.push(i),!0)}).each(function(){var t,e,r;return r=(t=n(this)).attr("data-item_id"),e=s(t),r&&o.indexOf(r)>-1?h(t):e&&i.indexOf(e)>-1?h(t):void 0}),e)},c=function(t){try{t=t.toLowerCase()}catch(e){e,t="en"}return'<div class="block-item-message">'+("ko"===t.substr(0,2)?"해당 콘텐츠는 추천에서 제외됩니다.":"zh-tw"===t||"zh-hant"===t.substr(0,7)||"zh-hk"===t?"這個內容將不會再顯示":"zh"===t.substr(0,2)?"这个内容将不会再显示":"ja"===t.substr(0,2)?"このコンテンツはレコメンドされなくなります":"id"===t.substr(0,2)?"Konten ini tidak lagi ditampilkan":"vi"===t.substr(0,2)?"Nội dung này sẽ không được hiển thị":"ms"===t.substr(0,2)?"Konten ini tidak akan ditampilkan lagi.":"th"===t.substr(0,2)?"เนื้อหานี้จะไม่แสดงอีกต่อไป":"This content will no longer be shown.")+"</div>"},r=function(t){return function(e){var i,o,r,a,s;if(e.preventDefault(),t.$wrap,s=t.service_name,a=t.lang,r=(i=n(this).parents(".item")).attr("data-item_id"),h(i,{messagebox:c(a)}),o=u(s),r&&-1===o.indexOf(r)&&(o.push(r),g(s,o)),10===o.length)return n.ajax({method:"POST",url:"/util/exclude_item_count",data:{service_name:s}})}},s=function(t){return t.find(".thumbnail").attr("src")||t.find(".name").text()},o=function(t){return function(e){var i,o,r,a,u;if(e.preventDefault(),t.$wrap,u=t.service_name,a=t.lang,i=n(this).parents(".item"),r=s(i),h(i,{messagebox:c(a)}),o=d(u),r&&-1===o.indexOf(r)&&(o.push(r),m(u,o)),10===o.length)return n.ajax({method:"POST",url:"/util/exclude_ad_count",data:{service_name:u}})}},p=function(t){var e;return t.from,t.service_name,e=t.$wrap,t.lang,(e=a(t)).find(".item:not(.item-sp) .block-btn-wrap").on("click",r(t)),e.find(".item-sp .block-btn-wrap").on("click",o(t))},f=function(t){return n(window).on("onload_responsive_group",function(){return p(t)}),p(t)},e.exports={init:f}},{"./frameSynchronizer.coffee":7,"./itemManager.coffee":10}],6:[function(t,e,i){var n=t("./frameSynchronizer.coffee"),o=t("./util");e.exports={init:function(t){var e=window.$,i=t.id,r=t.from,a=t.uid,s=t.service_id,d=t.widget_id;e(".powered-by, .sp-info a").on("click",function(t){t.preventDefault();var u=e(".target:not([aria-hidden]) .item-sp").toArray().map(function(t){return{ad_id:e(t).attr("data-ad_id"),title:e(t).find(".name").text(),thumbnail:e(t).find(".thumbnail").attr("src"),link:e(t).find("a").attr("href")}}),c={id:i,from:r,uid:a,service_id:s,widget_id:d,ads:JSON.stringify(u.slice(0,5))};!function(t){return/^https?/.test(t)&&-1===t.indexOf("daumcdn.net")}(r)?(c.wrapped=window.self!==window.top,window.open("".concat(t.target.href,"?").concat(o.queryify(c)))):(c.show_dable_popup="1",t.currentTarget.href.indexOf("geniee")>-1&&(c.is_geniee="1"),n.sendPostMessage(c))})}}},{"./frameSynchronizer.coffee":7,"./util":18}],7:[function(t,e,i){var n,o,r,a,s,d,u,c,l,f,p,h,m,g,_,v;n=window.$,g=t("./simplePostMessage.js"),r=t("./ga"),v=t("./util.js"),u=!1,d=!1,l=function(t,e){return t.replace(new RegExp("^.*"+e+"=([^&]+).*$"),"$1")},h=function(t){var e,i,n;for(i in e=t.from,n=[],t)"from"!==i&&n.push(i+"="+t[i]);if(0===e.indexOf("http"))return g.postMessage(n.join("&"),e)},c=function(t,e){var i,o;null==e&&(e=0),(i=n("img.thumbnail:visible")).length>0&&0===i.height()&&e<10?setTimeout(function(){return c(t,e+1)},100):(o=n("body").outerHeight(!0)||1,t(o))},s=function(){return"function"==typeof window.matchMedia?window.matchMedia("(prefers-color-scheme: dark)").matches:void 0},p=function(t){var e,i,o,r,a,d,u,c,l,f,p;for(t.from,u=t.log_url,e=null!=(c=t.ad_log_urls)?c:[],i=t.ad_size,o=function(t){return-1===(t=t.replace(/^https?:/,"")).indexOf("?")&&(t+="?"),s()&&(t+="&is_dark_mode=1"),t},u&&v.logByHiddenImg(o(u)),l=[],r=a=0,d=e.length;a<d;r=++a)p=e[r],n.isArray(p)||(p=[p]),r>=i||l.push(function(){var t,e,i;for(i=[],t=0,e=p.length;t<e;t++)f=p[t],i.push(v.logByHiddenImg(o(f)));return i}());return l},f=function(t,e,i){var o,r,a,s,d,u,c,l,f,p,h;for(null==e&&(e=[]),h=i.wrapped,o=i.ad_size,f=i.widget_x,p=i.widget_y,r=function(t){return-1===(t=t.replace(/^https?:/,"")).indexOf("?")&&(t+="?"),h&&(t+="&is_wrapped=1"),f>-1&&(t+="&widget_x="+f),p>-1&&(t+="&widget_y="+p),t},t&&v.logByHiddenImg(r(t)),u=[],a=s=0,d=e.length;s<d;a=++s)l=e[a],n.isArray(l)||(l=[l]),a>=o||u.push(function(){var t,e,i;for(i=[],t=0,e=l.length;t<e;t++)c=l[t],i.push(v.logByHiddenImg(r(c)));return i}());return u},o=null,_=function(t,e){return null==e&&(e=!1),c(function(i){if(!e||o!==i)return t.if_height=i,o=i,h(t)})},a=function(t){var e,i,o,a,s,m,w,x,b,y,k,$,C,T,O,I,M,S,D,E,A,q,z,P,R,N,j,U;if(N=t.service_name,E=t.messages,I=t.impressionlog_link,$=t.exposelog_link,o=t.ad_exposelog_links,a=t.ad_implog_links,m=t.ads,s=t.ad_size,T=t.ga_action_sample_rate,S=t.is_secret_widget,q=t.pre_expose,U=t.wrapped_frame,R=t.service_id,O=E.id,C=E.from,(j=E.sliding)&&(h({id:O,from:C,sliding:j}),delete E.sliding),n(window).on("syncheight",function(){return _({id:O,from:C},!0)}),n(window).on("load",function(){var t;return c(function(t){return E.if_height=t,E.has_recom=t>1?1:0,h(E)}),(t=function(){return setTimeout(function(){return d?(_({id:O,from:C,init:"1"}),p({from:C,log_url:I,ad_log_urls:a,ad_size:s})):t()},300)})(),setTimeout(function(){return _({id:O,from:C},!0),n(window).on("orientationchange resize",function(){return _({id:O,from:C},!0)})},3e3)}),-1===window.location.href.indexOf("test=1")&&n(".recommendations").on("page",function(t,e){return h({id:O,from:C,check_and_page_expose:1,page:e})}),q&&setTimeout(function(){return n(window).trigger("pre-expose")},0),z=!1,x=function(t){var e,i,a;if(null==t&&(t={}),!(u||window.location.href.indexOf("test=1")>-1)&&(!S||z))return e=t.widget_x,i=t.widget_y,a=t.wrapped,n(window).trigger("expose"),f($,o,{wrapped:a,ad_size:s,widget_x:e,widget_y:i}),r.sendGaExposeLog(N,m,T,R),r.attachGaUidToClickLinks(),u=!0},k=[1],P=function(t,e){var i,o,r,a,d,u;for(a=[],i=o=0,r=t.length;o<r;i=++o)u=t[i],n.isArray(u)||(u=[u]),e===Math.floor(i/s)+1&&a.push(function(){var t,e,i;for(i=[],t=0,e=u.length;t<e;t++)d=(d=u[t]).replace(/^https?:/,""),U&&(d+=(d.indexOf("?")>-1?"&":"?")+"is_wrapped=1"),i.push(v.logByHiddenImg(d));return i}());return a},b=function(t){var e,i;for(e=0,i=k.length;e<i;e++)if(t===k[e])return;return k.push(t),P(o,t),P(a,t)},w=function(t){return n(".recommendations .item").each(function(){if(n(this).find("a").attr("href").indexOf(t)>-1)return n(this).children(".item-link").hide()})},D=!0,A=function(t){var e,i,o,r,a,s,d,u;if((e=t.data)&&e.indexOf){if(e.indexOf("resume_dable_widget")>-1)return D=!0;if(D)return e.indexOf("update_height")>-1?_({id:O,from:C},!0):0===e.indexOf("expose")?(d=(s=(null!=(r=e.split("="))&&null!=(a=r[1])?a.split(","):void 0)||[])[0],u=s[1],x({widget_x:d,widget_y:u})):0===e.indexOf("page_expose")?(o=Number(l(e,"page_expose")),b(o)):e.indexOf("show_secret_widget")>-1?(z=!0,x()):e.indexOf("pre_expose")>-1&&!q?n(window).trigger("pre-expose"):0===e.indexOf("block_content")?(i=l(e,"block_content"),w(i)):e.indexOf("exposure_start")>-1?n(window).trigger("exposure_start"):e.indexOf("exposure_end")>-1?n(window).trigger("exposure_end"):n(window).trigger("receive-message",e)}else;},n(window).on("close_dable_widget",function(){var t;return(t=n.extend({},E)).close_dable_widget=1,h(t),D=!1}),y=function(){return n(window).off("mouseover",y),x()},n(window).on("mouseover",y),g.receiveMessage(A),U&&("undefined"!=typeof window&&null!==window?window.IntersectionObserver:void 0))return{expose_duration_ms:0,timer_id:null},M=new IntersectionObserver(function(t,e){return t.forEach(function(t){if(t.isIntersecting)return u?e.unobserve(t.target):(x({wrapped:!0}),e.unobserve(t.target))})}),e=n("<div />").css({position:"fixed",top:"200px",left:0,width:"1px",height:"1px"}).appendTo(document.body),i=n("<div />").css({position:"fixed",left:0,bottom:0,width:"1px",height:"1px"}).appendTo(document.body),M.observe(e.get(0)),M.observe(i.get(0))},m=function(){return d=!0},e.exports={init:a,sendPostMessage:h,setAdExchangeFilled:m,syncHeight:_}},{"./ga":8,"./simplePostMessage.js":15,"./util.js":18}],8:[function(t,e,i){var n=t("../../common/require/ga").requireGa,o="UA",r=[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20],a=400,s=20;e.exports={attachGaUidToClickLinks:function(){var t;t=function(t){$(".item-sp a").each(function(){var e=$(this).attr("href");-1===e.indexOf("sp-api")||e.indexOf("ga_uid")>-1||(e+="&ga_uid=".concat(t),$(this).attr("href",e))})},n(),ga(function(){return t(ga.getAll()[0].get("clientId"))})},sendGaExposeLog:function(t,e,i,d){if(i&&!(i<0)&&t&&d&&e&&e.length){n();var u=Math.min(Math.max(d,0)/a|0,s-1),c=o+"-112834822-"+r[u];ga("create",c,"auto",{name:"dableadexpose",sampleRate:i}),e.forEach(function(t){var e={};e.dimension1=d,e.dimension2=t.campaign_id,e.dimension3=t.content_id,ga("dableadexpose.send","pageview",e)})}}}},{"../../common/require/ga":1}],9:[function(t,e,i){var n,o,r,a,s,d,u,c,l,f;n=window.$,o=t("./frameSynchronizer.coffee"),(f=t("./itemManager.coffee")).omitItem,a=f.handleImgErr,n.fn.shuffle=function(){var t,e,i;return t=this.get(),e=function(t){return Math.floor(Math.random()*t)},i=n.map(t,function(){var i,o;return o=e(t.length),i=n(t[o]).clone(!0)[0],t.splice(o,1),i}),this.each(function(t){return n(this).replaceWith(n(i[t]))}),n(i)},d=0,l="",r=function(t,e){return"n"+e+(t%e-e+1||"")},c=function(t){var e,i;if(-1!==(i=t.index()))return e=[r(i,2),r(i,3),r(i,4)].join(" "),t.addClass(e)},u=function(){var t,e,i,o,r;return 1===(t=n(".target-wrap[hidden]:eq(0)")).length?(t.removeAttr("hidden"),r=t.index()+1,n(".recommendations").trigger("page",r)):(r=n(".target-wrap").size()+1,e=n(".target-wrap:last"),o=n(".target-wrap:eq("+d+")").clone().attr("class",l).insertAfter(e),c(o),o.find(".item:not(.item-sp)").shuffle(),o.find(".item-sp").shuffle(),o.find("[data-page]").each(function(){return n(this).attr("data-page",r)}),(i=o.find(".target:not(.infinite-swipe-target-clone)")).find("img.thumbnail").on("error",a),i.find("img[err]").each(a),n(".recommendations").trigger("page",r),d++),n(window).trigger("syncheight")},s=function(t){var e,i,r;if(i=t.id,e=t.from,r=t.infinite_feed_scroll_amount,!t.is_test)return l=n(".target-wrap:eq(0)").attr("class"),n(".target-wrap").each(function(){return c(n(this))}),o.sendPostMessage({id:i,from:e,is_infinite_feed:"1",infinite_feed_scroll_amount:r}),n(window).on("receive-message",function(t,e){if(-1!==e.indexOf("load_infinite_feed"))return u()});"undefined"!=typeof console&&null!==console&&console.info("Dable DEBUG: Infinite feed widget do not works on test mode")},e.exports={init:s}},{"./frameSynchronizer.coffee":7,"./itemManager.coffee":10}],10:[function(t,e,i){var n,o,r,a,s,d,u,c,l,f,p;p=t("./thumbnailManager.coffee"),s=p.adjustImgRatioTo16x10,d=p.adjustImgSizeContain,u={},r=function(t){return"TR"===t.parent().prop("tagName")?t.prop("className","empty").html("&nbsp;"):t.remove()},n=function(t){var e;if(e=t.find("img.thumbnail").attr("data-org-src"))return t.find("img.thumbnail").attr("src",e)},a=function(t,e,i){var n,o,r,a,c,l;return null==i&&(i={}),r=null!=(c=i.messagebox)&&c,n=null,l=function(){var i;return n=t.clone({deepWithDataAndEvents:!0}),e.replaceWith(n),i=e.find("img"),u.thumbnail_fix_16x10&&s(i),d(i)},r?(e.parent().prop("tagName"),o=$(r),e.html(o),setTimeout(function(){return e.fadeOut("slow",function(){return l(),n.fadeIn("slow")})},1e3)):(l(),e.has("data-page")?(a=e.attr("data-page"),n.attr("data-page",a)):void 0)},o=function(t){var e,i;return(e=t.find(".list-sub").find('.item-sub:not(:has([err="1"]))').not(".empty").eq(0)).length?(i=e.clone({deepWithDataAndEvents:!0}),e.parent().append(e)):i=null,i},f=function(t,e){var i,s,d,u;if(null==e&&(e={}),s=t.parents(".target-wrap"),d=t.attr("data-idx"),u=s.attr("data-item_total"),!(d.indexOf("sub")>-1))return i=o(s),s.find(".target").each(function(){var o,s,c,l,f,p,h,m,g;if(l=$(this),t=l.find(".item[data-idx="+d+"]"),i)return n(s=i),s.attr("data-idx",d),s.addClass("item"+d),a(s,t,e);for(o=null,g=Number(d)+1,f=p=h=Number(u),m=g;h<=m?p<=m:p>=m;f=h<=m?++p:--p)if((c=l.find(".item[data-idx="+f+"]")).length&&!c.has("[err=1]").length){o=c;break}return(null!=o?o.length:void 0)>0?((s=o.clone({deepWithDataAndEvents:!0})).attr("data-idx",d),r(o),n(s),a(s,t,e)):r(t)}),s.length&&0===s.find(".item").length?$("body").html(""):void 0;r(t)},c=function(){var t;return t=$(this).parents(".item"),f(t)},l=function(t){return t.thumbnail_fix_16x10,u=t},e.exports={omitItem:f,handleImgErr:c,init:l}},{"./thumbnailManager.coffee":17}],11:[function(t,e,i){var n,o,r;n=window.$,o=t("./frameSynchronizer.coffee"),r=function(t){var e;return e=t.from,t.service_id,t.service_name,n("body").on("click",".item-minicontent a",function(t){var i,r,a,s;return t.preventDefault(),null!=(a=(r=n(this).data("org-href")).match(/campaigns\/([^\/]+)\//))?a[1]:void 0,null!=(s=r.match(/contents\/([^\/]+)\//))?s[1]:void 0,o.sendPostMessage({from:e,show_minicontent:r}),i=r.replace("click_redirect","click_without_redirect"),"1"===n(this).data("clicked")&&(i+="&force_click_cache=1&nolog=1"),n.getJSON(i+"&callback=?",function(){}),n(this).data("clicked","1")})},e.exports={init:r}},{"./frameSynchronizer.coffee":7}],12:[function(t,e,i){var n,o,r,a,s,d,u;n=window.$,u=t("./recommendations"),s=function(t,e){var i,n;if((null!=t?t.length:void 0)&&t.text()!==String(e))return n=function(e){return t.text(e)},(i=function(t,i){return setTimeout(function(){return n(Math.max(0,e+t))},i)})(4,50),i(-3,100),i(3,150),i(-2,200),i(2,250),i(-1,325),i(1,400),i(0,500)},o=n(".realtime-refresh-counter"),r=n(".realtime-refresh-counter-value"),a=function(){function t(t){this.item_id=t.item_id,this.service_name=t.service_name,this.settings_group=t.settings_group,this.post_param=t.post_param,this.$list=n(".list");try{this.$list.mixItUp({layout:{display:"block"}})}catch(t){t}this.updateCount()}return t.prototype.startTimer=function(t){var e,i,n;if(!(t<=0))return e=10,n=this,(i=function(){return o.attr("data-count",e),r.text(e),--e>=0?setTimeout(i,1e3):(n.updateCount(),n.updateRecommendations(),setTimeout(function(){return n.startTimer(t-1)},1e3))})()},t.prototype.updateCount=function(){var t;return t=encodeURIComponent,n.getJSON("/items/services/"+t(this.service_name)+"/id/"+t(this.item_id)+"/recent_user_count").done(function(t){var e,i;return e=(null!=t&&null!=(i=t.result)?i.count:void 0)||0,s(n(".realtime-count-value"),Math.max(1,e))})},t.prototype.updateRecommendations=function(){var t;return function(t,e){return e.before(t),t.slideDown(500)},t=this.$list,u.read({item_id:this.item_id,responsive_group:this.responsive_group,post_param:this.post_param,settings_group:this.settings_group,nolog:!0,nocache:!0}).then(function(e){var i,o,r;i=t.find(".item"),o=e.find(".list .item:not(.item-sp)"),r=i.length-1,o.each(function(e){var o,a,s,d;return s=n(this).data("item_id"),(a=i.filter("[data-item_id='"+s+"']")).length>0?(d=n(this).find(".item-score-number").text(),a.attr("data-item_score",d).find(".item-score-number").text(d)):(o=n(this).clone(),function(){for(var t;;)if(t=i.eq(r),r--,!(null!=t?t.hasClass("item-sp"):void 0))return t}().replaceWith(o)),i=t.find(".item")}),t.find(".item-sp").each(function(){var t;return n(this).attr("data-item_score",(null!=(t=n(this).next())?t.attr("data-item_score"):void 0)||0)});try{return t.mixItUp("sort","item_score:desc")}catch(t){t}})},t}(),d=function(t){return new a(t)},e.exports={init:d,Counter:a}},{"./recommendations":13}],13:[function(t,e,i){var n=t("./util"),o=n.objFromQuery,r=n.queryify,a={};e.exports={read:function(t){var e=window.$,i=t.nocache||!1,n=t.item_id,s=t.responsive_group,d=t.nolog,u=t.post_param,c=t.settings_group,l="".concat(n,"--").concat(s);if(a[l]&&!i)return e.when(a[l]);var f=window.location,p="".concat(f.protocol,"//").concat(f.host).concat(f.pathname,"/recommendations"),h=o(f.search),m={},g=h;delete h.client_width,u&&(Object.keys(u).forEach(function(t){void 0!==u[t]&&(m[t]=u[t])}),delete m.client_width,g=m),n&&(g.item_id=n),null!==s&&(g.responsive_group=s),d&&(g.nolog=1),c&&(g.abtest_index=c);var _="".concat(p,"?").concat(r(h)),v=u?e.post(_,m):e.get(_);return e.when(v).then(function(t){var i=e(t);return a[l]=i,i})},cache:function(t,e,i){var n="".concat(t,"--").concat(e);a[n]=i.clone()}}},{"./util":18}],14:[function(t,e,i){var n,o,r,a;n="undefined"!=typeof window&&null!==window?window.$:void 0,a=null,o=function(t,e){var i,o,r,s,d,u,c;for(c=n("body").width(),d=-1,o=i=0,r=t.length;i<r;o=++i)if(c>((s=t[o]).min_width||0)&&c<(s.max_width||9999)){d=o;break}return u=a!==d,a=d,e(u,d)},r=function(t,e,i){var r;return null==e&&(e=null),a=e,o(t,i),e>-1&&n(".widget").attr("data-responsive-group",e+1),r=null,n(window).on("resize orientationchange",function(){return r&&clearTimeout(),r=setTimeout(function(){return o(t,i),clearTimeout(r),r=null},300)})},e.exports={init:r}},{}],15:[function(t,e,i){var n={};!function(t){"$:nomunge";var e,i,n,o,r=1,a=window.postMessage;void 0!==window.opera&&window.opera.version&&9==parseInt(window.opera.version())&&Event.prototype.__defineGetter__("origin",function(){return"http://"+this.domain}),t.postMessage=function(t,e,i){e&&(t="string"==typeof t?encodeURIComponent(t):encodeURIComponent(JSON.stringify(t)),i=i||parent,a?i.postMessage(t,e.replace(/([^:]+:\/\/[^\/]+).*/,"$1")):e&&(i.location=e.replace(/#.*$/,"")+"#"+ +new Date+r+++"&"+t))},t.receiveMessage=o=function(t,r,s){a?(t&&(n&&o(),n=function(e){if("string"==typeof r&&e.origin!==r||"function"==typeof r&&!1===r(e.origin))return!1;var i={};for(var n in e)"path"!==n&&(i[n]=e[n]);i.data=decodeURIComponent(i.data);try{i.data=JSON.parse(i.data)}catch(t){}t(i)}),window.addEventListener?window[t?"addEventListener":"removeEventListener"]("message",n,!1):window[t?"attachEvent":"detachEvent"]("onmessage",n)):(e&&clearInterval(e),e=null,t&&(s="number"==typeof r?r:"number"==typeof s?s:100,e=setInterval(function(){var e=document.location.hash,n=/^#?\d+&/;e!==i&&n.test(e)&&(i=e,t({data:e.replace(n,"")}))},s)))}}(n),e.exports=n},{}],16:[function(t,e,i){var n,o,r,a,s,d,u,c,l,f,p,h,m,g,_;n="undefined"!=typeof window&&null!==window?window.$:void 0,a={end:35,home:36,left:37,up:38,right:39,down:40,enter:13,space:32},h=function(){var t,e,i,n,o,r;if(!("undefined"!=typeof document&&null!==document?document.createElement:void 0))return!1;for(n=document.createElement("div"),o="transform WebkitTransform MozTransform OTransform msTransform".split(" "),r="transition WebkitTransition MozTransition OTransition msTransition".split(" "),t=e=0,i=o.length;0<=i?e<=i:e>=i;t=0<=i?++e:--e)if(void 0!==n.style[o[t]]&&void 0!==n.style[r[t]])return!0;return!1}(),o=null,r=null,_=null,d=function(t){return o.not(":eq("+t+")").removeClass("selected").attr("aria-selected","false"),o.eq(t).addClass("selected").attr("aria-selected","true"),r.not(":eq("+t+")").removeClass("selected").find("a").attr("tabindex",-1),r.eq(t).addClass("selected").find("a").removeAttr("tabindex")},f=function(t){var e;return o=n(".recommendations .tab"),e=(r=n(".recommendations .tab-content")).length||1,_=e-1,h?(r.parent().css({width:100*e+"%"}),r.removeAttr("hidden"),r.css({width:100/e+"%",display:"block",float:"left"})):(r.eq(0).addClass("selected").removeAttr("hidden").attr("aria-hidden","false"),r.not(":eq(0)").attr({hidden:"true","aria-hidden":"true"})),s(t)},s=function(t){return d(t),h?r.css({"-webkit-transform":"translate3D(-"+100*t+"%, 0, 0)","-moz-transform":"translate3D(-"+100*t+"%, 0, 0)","-ms-transform":"translate3D(-"+100*t+"%, 0, 0)","-o-transform":"translate3D(-"+100*t+"%, 0, 0)",transform:"translate3D(-"+100*t+"%, 0, 0)"}):(r.eq(t).addClass("selected").removeAttr("hidden").attr("aria-hidden","false"),r.not(":eq("+t+")").attr("hidden","true").attr("aria-hidden","true")),n(window).trigger("syncheight"),n(".recommendations").trigger("page",t+1)},u=function(){var t;return t=Number(n(this).attr("data-tab-index")),s(t)},m=function(t){var e;return(e=t.keyCode)===a.end?(t.preventDefault(),s(_)):e===a.home?(t.preventDefault(),s(0)):void 0},g=function(t){var e,i,o;return i=t.keyCode,e=Number(n(this).attr("data-tab-index")),i===a.left?(o=0===e?_:--e,s(o)):i===a.right?(o=e===_?0:++e,s(o)):i===a.enter||i===a.space?s(e):void 0},c=function(t,e){return t=Math.ceil(t),e=Math.floor(e),Math.floor(Math.random()*(e-t+1))+t},p=function(t){return n(".tab-content").each(function(){return n(this).find(".item:not(.item-sp):not(.item-sub)").each(function(t,e){return n(this).find(".tab-title").html(t+1)})})},l=function(t){var e;return e=t.init_tab_idx<0?c(0,3):t.init_tab_idx,f(e),o.on("click",u),o.on("keydown",m),o.on("keyup",g),n(window).on("onload_responsive_group",function(){return l(t)}),p()},e.exports={init:l,initTabTitle:p}},{}],17:[function(t,e,i){var n,o,r,a,s,d;r=function(t,e){var i;return i=function(t,e){return t.complete?e($(t)):setTimeout(function(){return i(t,e)},100)},t.each(function(){return i(this,e)})},d=function(t){var e,i,n;if(t.is(":visible"))return n=t.width(),(e=t.height())<=(i=t.parent().height())?(n=parseInt(n*i/e,10),t.css({width:n+"px",height:i+"px"})):n/e<1.2&&n/e>.35&&n<=400&&(n=parseInt(n*(n/e/1.2),10),t.css({width:n+"px"})),t.attr("data-adjusted","1")},a=function(t){var e,i,n,o,r,a;if((e=t.parent()).hasClass("img-size-contain")){e.css({"text-align":"center"}),t.css({margin:"0 auto",height:"auto",width:"auto","max-width":"100%","max-height":"100%","min-width":"5px","min-height":"5px",left:0,right:0}),a=t.outerWidth(),i=t.outerHeight(),o=e.outerWidth(),n=e.outerHeight();try{return r=a/i>o/n,t.css({width:r?"100%":"auto",height:r?"auto":"100%"})}catch(t){}}},n=function(t){return r(t,d)},o=function(t){return r(t,a)},s=function(t){var e,i,r,a,s,d;if(d=t.thumbnail_fix_16x10,a=t.is_secret_widget,i=$(".recommendations"),r=$(".selfitems"),s=function(t){var e;return(e=$('[data-page="'+t+'"]').parent().find("img[data-org-src]")).each(function(){var t;return t=$(this).attr("data-org-src"),$(this).attr("src",t).removeAttr("data-org-src")}),d&&n(e),o(e)},$(window).on("pre-expose expose check-thumbnail",function(t){if("pre-expose"!==(null!=t?t.type:void 0)||!a)return s(1)}),i.on("page",function(t,e){return s(e)}),r.on("page",function(t,e){return s(e)}),e=$("img.thumbnail:not([data-org-src])"),d&&n(e),o(e),window.top===window&&s(1),document.documentMode&&document.documentMode<=7)return $("body").on("click",".thumbnail",function(t){return t.preventDefault(),$(this).parents(".item-link").get(0).click()})},e.exports={init:s,adjustImgRatioTo16x10:n,adjustImgSizeContain:o}},{}],18:[function(t,e,i){function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t){var e,i=0;if(0===t.length)return i;for(e=0;e<t.length;e++)i=(i<<5)-i+t.charCodeAt(e),i|=0;return Math.abs(i)}e.exports={simpleStringHash:o,logByHiddenImg:function(t){if("#?"!==t){-1===t.indexOf("is_gif=1")&&(t+=(t.indexOf("?")>-1?"&":"?")+"is_gif=1");var e="beacon-"+o(t),i=document.getElementById(e);i||((i=document.createElement("img")).width=i.height="1",i.src=t,i.style.display="none",document.body.appendChild(i)),i.onload=function(){return document.body.removeChild(i)}}},getUrlParameter:function(t,e){var i=new RegExp("[?&]"+e+"=([^&#]*)").exec(t);return i?decodeURIComponent(i[1])||0:null},getProtocol:function(){return"https:"===window.location.protocol?"https:":"http:"},api_server_domain:function(){return window.TEST_API_SERVER_DOMAIN||"api.dable.io"},reco_logging_server_domain:function(){return window.TEST_RECO_LOGGING_SERVER_DOMAIN||"r-log.dable.io"},queryify:function(t){return Object.keys(t).map(function(e){var i="object"===n(t[e])?JSON.stringify(t[e]):String(t[e]);return"".concat(e,"=").concat(encodeURIComponent(i))}).join("&")},objFromQuery:function(t){var e={};return t.replace(/([^=&?]+)=([^&]*)/g,function(t,i,n){e[i]=decodeURIComponent(n)}),e}}},{}],19:[function(t,e,i){var n=t("./util"),o=window.$,r=function(t){return Number(t.getAttribute("playCount"))||0},a=function(t){var e=r(t);e+=1,t.setAttribute("playCount",e)},s=function(t){return"true"===t.getAttribute("charged")},d=function(t){t.setAttribute("charged",!0)},u=function(t){var e=Math.abs(t.currentTime).toFixed(0);t.setAttribute("playTime",e)},c=function(t){var e=t.split("_");return e.length>3?[e[1],e[2]]:[null,null]},l=function(t,e){var i=e.service_name,r=e.widget_id,a=e.uid,s=e.channel,d=c(t.getAttribute("video-ad-id")),u=d[0],l=d[1],f=t.getAttribute("playCount"),p=t.getAttribute("playTime"),h=t.duration,m=Math.abs(p/h).toFixed(2)>1?1:Math.abs(p/h).toFixed(2),g=n.getProtocol()+"//"+n.api_server_domain()+"/";g+="logs/services/"+encodeURIComponent(i)+"/",g+="users/"+a+"/video";var _={channel:s,widget_id:r,campaign_id:u,content_id:l,play_count:f,play_time:p,duration:h,viewing_ratio:m,event_type:"playLog"};o.ajax({method:"POST",url:g,data:_})},f=function(t,e){var i=e.service_name,r=e.widget_id,a=e.uid,s=e.channel,d=c(t.getAttribute("video-ad-id")),u=d[0],l=d[1],f=t.getAttribute("playCount"),p=t.duration,h=n.getProtocol()+"//"+n.api_server_domain()+"/";h+="logs/services/"+encodeURIComponent(i)+"/",h+="users/"+a+"/video";var m={channel:s,widget_id:r,campaign_id:u,content_id:l,play_count:f,duration:p,event_type:"completePlayLog"};o.ajax({method:"POST",url:h,data:m})},p=function(t,e,i){var r=e.service_name,a=e.widget_id,s=e.uid,d=e.channel,u=c(t.getAttribute("video-ad-id")),l=u[0],f=u[1],p=t.duration,h=n.getProtocol()+"//"+n.api_server_domain()+"/";h+="logs/services/"+encodeURIComponent(r)+"/",h+="users/"+s+"/video";var m={channel:d,widget_id:a,campaign_id:l,content_id:f,duration:p,charging_type:i,event_type:"chargingLog"};o.ajax({method:"POST",url:h,data:m})},h=function(t){for(var e=0,i=t.length;e<i;e+=1){var n=t[e];0===r(n)&&a(n),n.play()}},m=function(t){for(var e=0,i=t.length;e<i;e+=1){t[e].pause()}},g=function(t){!function(t){return r(t)<3}(t)?t.load():(a(t),function(t){t.setAttribute("playTime",0)}(t),t.play())};e.exports={init:function(t){for(var e=t.service_name,i={service_id:t.service_id,service_name:e,widget_id:t.widget_id,uid:t.uid,channel:t.channel},n=o("div[data-is_video_slot='1']"),r=o("video.thumbnail"),a=0,c=n.length;a<c;a+=1)n[a].onclick=function(){var t=o(this).find("video")[0]||null,e=s(t);t&&(e||(p(t,i,"click"),d(t)),m(r))};for(var _=0,v=r.length;_<v;_+=1)r[_].onended=function(){var t=s(this);g(this),f(this,i),t||(d(this),p(this,i,"view"))},r[_].ontimeupdate=function(){var t=Math.abs(this.currentTime).toFixed(0),e=Number(this.getAttribute("playTime"))||0,n=s(this);t>e&&(u(this),l(this,i)),!n&&t>=15&&(d(this),p(this,i,"view"))};o(window).on("expose",function(){var t=o("video.thumbnail");h(t)}),o(window).on("exposure_start",function(){var t=o("video.thumbnail");h(t)}),o(window).on("exposure_end",function(){var t=o("video.thumbnail");m(t)})}}},{"./util":18}],20:[function(t,e,i){var n,o,r,a,s,d,u,c,l,f,p,h,m,g,_,v,w,x,b,y;n=window.$,t("infinite-swipe"),o=t("./lib/Widget.coffee"),_=t("./lib/recommendations"),f=t("./lib/frameSynchronizer.coffee"),w=t("./lib/responsiveManager.coffee"),b=t("./lib/thumbnailManager.coffee"),h=t("./lib/itemManager.coffee"),g=t("./lib/realtimeCounter.coffee"),l=t("./lib/dablePopup"),c=t("./lib/blockItem.coffee"),r=t("./lib/ad.coffee"),p=t("./lib/infiniteFeed.coffee"),m=t("./lib/miniContent.coffee"),x=t("./lib/tabManager.coffee"),y=t("./lib/videoManager"),a=t("./lib/adBlockObserver"),s=function(){var t,e;return e=(t=n(".thumbnail").eq(0)).length?t.offset().top+t.height()/2-20:50,n(".prev, .next").css("top",e)},d=function(){var t;if(n(".selfitems").length){switch(n(".selfitems").data("selftype")){case"cart":t="131.1.1";break;case"buy":t="132.1.1";break;default:t="130.1.1"}return n(".selfitems a").each(function(){var e,i,o,r,a,s;if(!((e=n(this)).attr("href").indexOf("click_redirect")>-1))return e.data("orglink")||e.data("orglink",e.attr("href")),r=e.data("orglink"),o=e.parents(".item").data("item_id"),a=n(".recommendations a").attr("href"),s=(s=(s=a).replace(/\&pick=[^\&]+/,"&pick="+o)).replace(/\&cm=[^\&]+/,"&cm="+t),i=s=r?s.replace(/\&url=[^\&]+/,"&url="+r):s.replace(/\&url=[^\&]+/,""),e.attr("href",i)})}},u=function(){var t,e,i,o,r;if(n(".selfitems").length)return t=parseInt(n(".recommendations .target-wrap").attr("data-item_count"),10),i=n(window).width(),r=100-(o=100*((e=parseInt(n(".list").css("margin-left"))+parseInt(n(".list").css("margin-right")))*t+i-e)/(t+1)/i),n(".selfitems").css("width",parseInt(100*o-10)/100+"%"),n(".recommendations").css("width",parseInt(100*r-10)/100+"%")},v=function(t,e){var i,r,a,c,l,f,p;return i=t.item_id,f=t.responsive_group,r=null!=(c=t.nolog)&&c,a=t.post_param,p=null!=(l=t.settings_group)?l:0,n(".recommendations").addClass("loading"),_.read({item_id:i,responsive_group:f,post_param:a,settings_group:p,nolog:r}).then(function(t){var i,r,a,c;if(i=n(".recommendations"),t.find(".list-sub").length?(i.find(".list-sub").html("").replaceWith(t.find(".list-sub").clone()),i.find(".list").infiniteSwipe("destroy").html("").replaceWith(t.find(".list").clone())):i.find(".list").infiniteSwipe("destroy").html("").replaceWith(t.find(".list").clone()),r=i.find(".target-wrap"),a=Math.ceil(Number(r.attr("data-data_count"))/Number(r.attr("data-item_count"))),i.find(".total").text(a),c=new o({$wrap:i,total:a}),n(window).on("expose",function(){return c.onExpose()}),n(".recommendations").removeClass("loading"),null!=f?n(".widget").attr("data-responsive-group",f+1):n(".widget").attr("data-responsive-group",0),d(),u(),s(),n(window).trigger("syncheight").trigger("onload_responsive_group"),e)return e()})},window.initWidgetPage=function(t){var e,i,_,k,$,C,T,O,I,M,S,D,E,A,q,z,P,R,N,j,U,W,L,B,F,H,G,X,J,Q,V,Y,K,Z,tt,et,it,nt,ot,rt,at,st,dt,ut,ct;return st=t.widget_id,dt=t.widget_name,I=t.channel,X=t.lang,et=t.service_name,D=t.country,it=t.service_type,G=t.item_id,O=t.ads,E=t.crit,J=t.messages,P=t.impressionlog_link,A=t.exposelog_link,Q=t.post_param,k=t.ad_exposelog_links,$=t.ad_implog_links,q=t.ga_action_sample_rate,nt=t.settings_group,R=t.init_responsive_group,B=t.is_realtime_widget,F=t.is_secret_widget,L=t.is_infinite_feed,ot=t.thumbnail_fix_16x10,V=t.pre_expose,ut=t.wrapped_by_tab,N=t.init_tab_idx,W=t.is_block_item,M=t.cookieoff,ct=t.wrapped_frame,tt=t.service_id,T=t.ad_size,C=t.ad_req,_=t.ad_default_request_id,rt=t.uid,i=t.ad_box_type,H=t.is_test,Z=t.responsive,K=R,(null!=Z?Z.length:void 0)>0&&w.init(Z,K,function(t,e){return K=e,t?v({item_id:null,responsive_group:e,post_param:Q,settings_group:nt},function(){return n(".widget").css("opacity",1)}):n(".widget").css("opacity",1)}),e=n(".selfitems"),(z=e.length>0)&&(new o({$wrap:e,onPage:function(t){return G=n(".selfitems [data-idx="+(t-1)+"]").attr("data-item_id"),v({item_id:G,responsive_group:K,nolog:!1,post_param:Q}),e.trigger("page",t)}}),d(),u()),Y=null,n(window).on("pre-expose load resize orientationchange",function(){return Y&&clearTimeout(Y),Y=setTimeout(function(){return z&&u(),s(),n(window).trigger("syncheight"),Y=null},100)}),U="x7yzrGl6"===st,j=(null!=I?I.indexOf("ad_fixed_paging"):void 0)>-1,U&&j&&n(".recommendations").addClass("isDableAdFixedPagingTestEl"),at=new o({$wrap:n(".recommendations")}),n(window).on("expose",function(){return at.onExpose()}),s(),B&&(S=new g.Counter({service_name:et,item_id:G,settings_group:nt,post_param:Q}),n(window).on("expose",function(){return S.startTimer(15)})),m.init({from:J.from,wrapped_frame:ct,ad_exposelog_links:k,service_id:tt,service_name:et}),L&&p.init({id:J.id,infinite_feed_scroll_amount:J.infinite_feed_scroll_amount,from:J.from,is_test:H}),f.init({service_name:et,ads:O,messages:J,impressionlog_link:P,exposelog_link:A,ad_exposelog_links:k,ad_implog_links:$,ga_action_sample_rate:q,is_secret_widget:F,pre_expose:V,wrapped_frame:ct,service_id:tt,ad_size:T}),b.init({thumbnail_fix_16x10:ot,is_secret_widget:F}),ut&&x.init({init_tab_idx:N}),l.init({id:J.id,from:J.from,wrapped_frame:ct,service_id:tt,uid:rt,widget_id:st,ads:O,ad_default_request_id:_}),W&&c.init({from:J.from,service_name:et,$wrap:n(".recommendations"),lang:X}),r.init({crit:E,widget_id:st,channel:I,ad_default_request_id:_,service_name:et,service_type:it,ad_exposelog_links:k,ad_implog_links:$,cookieoff:M,ad_size:T,ad_req:C,lang:X,ad_box_type:i}),y.init({service_name:et,service_id:tt,widget_id:st,uid:rt,channel:I}),a.init({service_id:tt,service_name:et,country:D,widget_id:st,widget_name:dt}),h.init({thumbnail_fix_16x10:ot})}},{"./lib/Widget.coffee":2,"./lib/ad.coffee":3,"./lib/adBlockObserver":4,"./lib/blockItem.coffee":5,"./lib/dablePopup":6,"./lib/frameSynchronizer.coffee":7,"./lib/infiniteFeed.coffee":9,"./lib/itemManager.coffee":10,"./lib/miniContent.coffee":11,"./lib/realtimeCounter.coffee":12,"./lib/recommendations":13,"./lib/responsiveManager.coffee":14,"./lib/tabManager.coffee":16,"./lib/thumbnailManager.coffee":17,"./lib/videoManager":19,"infinite-swipe":"infinite-swipe"}],"infinite-swipe":[function(t,e,i){function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}!function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery"],e):e("object"==(void 0===i?"undefined":n(i))?t("jquery"):jQuery)}(function(t){"use strict";var e=function(){for(var t=document.createElement("div"),e="transform WebkitTransform MozTransform OTransform msTransform".split(" "),i="transition WebkitTransition MozTransition OTransition msTransition".split(" "),n=0;n<e.length;n++)if(void 0!==t.style[e[n]]&&void 0!==t.style[i[n]])return!0;return!1}(),i=function(t,i,n){e?t.css({"-webkit-transform":"translate3D("+i+"px, 0, 0)","-moz-transform":"translate3D("+i+"px, 0, 0)","-ms-transform":"translate3D("+i+"px, 0, 0)","-o-transform":"translate3D("+i+"px, 0, 0)",transform:"translate3D("+i+"px, 0, 0)"}):t.css("opacity",.7).animate({"margin-left":i+"px",opacity:1},n.transition_ms)},n=function(e,i,n,o,r){o&&!r&&e.animate({opacity:0},n.transition_ms,function(){t(this).css({"margin-left":i+"px"}),t(this).animate({opacity:1},n.transition_ms+200)})},o=function(t,e,i){t.css({"margin-left":e+"px"})},r=function(t){switch(t){case"none":return o;case"slide":return i;case"fadeIn":return n;default:return i}},a=function(t){t.preventDefault(),t.stopPropagation()},s=function(e,i){null===(i=t.extend({$target_wrap:null,$target:null,$prev:null,$next:null,$curr:null,$autoswipe_pause_el:null,total:1,transition_ms:null,animation_type:"slide",infinite:!1,autoswipe_seconds:0,onPage:null},i)).transition_ms&&(i.transition_ms="slide"===i.animation_type?200:0),this.$el=e,this.$target_wrap=i.$target_wrap||e,this.$target=i.$target||e,this.$autoswipe_pause_el=i.$autoswipe_pause_el||e,this.p=1,this.offset=0,this.total=i.total,this.curr_px=0,this.options=i,this._drag_ended=!0,this._drag_blocked=!1,this.init()};s.prototype={_setTransitionDuration:function(t){var e=this.$target_wrap.get(0);e.style.webkitTransitionDuration=t+"ms",e.style.mozTransitionDuration=t+"ms",e.style.msTransitionDuration=t+"ms",e.style.oTransitionDuration=t+"ms",e.style.transitionDuration=t+"ms"},init:function(){if(this.$el.addClass("infinite-swipe-stage"),this.$target_wrap.addClass("infinite-swipe-target-wrap"),this._setTransitionDuration(this.options.transition_ms),this.$target.addClass("infinite-swipe-target"),this.options.infinite){var t=this.$target.clone().attr("aria-hidden",!0).addClass("infinite-swipe-target-clone").css("left","-"+this.getWidth(!0)+"px").find("a").attr("tabindex",-1).end(),e=this.$target.clone().attr("aria-hidden",!0).addClass("infinite-swipe-target-clone").css("left",this.getWidth(!0)+"px").find("a").attr("tabindex",-1).end();t.insertBefore(this.$target),e.insertBefore(this.$target),this.$target=this.$target.parent().find(".infinite-swipe-target")}this.addListeners(),!this.options.infinite&&this.options.$prev&&this.options.$prev.toggleClass("disabled",1===this.p),this.options.autoswipe_seconds>0&&this.initAutoswipe()},initAutoswipe:function(t){t&&(this.options.autoswipe_seconds=t);var e=this;this._as_next=function(){e._drag_blocked=!1,e._as_timeout_id||e.p===e.total&&!e.options.infinite?clearTimeout(e._as_timeout_id):e._as_timeout_id=setTimeout(function(){e._as_pause||e.swipeNext(),e._as_timeout_id=null,e._as_next()},1e3*e.options.autoswipe_seconds)},this._as_resume_event=function(){e._as_next()},this._as_pause_event=function(){e._as_timeout_id&&(clearTimeout(e._as_timeout_id),e._as_timeout_id=null)},this._as_next(),this.$autoswipe_pause_el.on("mouseenter focusin",this._as_pause_event).on("mouseleave focusout",this._as_resume_event)},onPrev:function(t){t.preventDefault(),t.stopPropagation(),this._drag_blocked=!1,(1!==this.p||this.options.infinite)&&this.swipePrev()},onNext:function(t){t.preventDefault(),t.stopPropagation(),this._drag_blocked=!1,(this.p!==this.total||this.options.infinite)&&this.swipeNext()},onDragLeft:function(t,e,i){if(!this._swiped){if(this.p===this.total&&!this.options.infinite)return void(this._drag_blocked=!0);if(this._drag_blocked=!1,window.addEventListener("touchmove",a,{passive:!1}),Math.abs(e)>5&&(this.p!==this.total||this.options.infinite))return t.preventDefault(),t.stopPropagation(),this._drag_ended=!0,this._swiped=!0,this.curr_px=0,this._setTransitionDuration(0),void this.swipeNext();var n=i;this.animate_px(n)}},onDragRight:function(t,e,i){if(!this._swiped){if(1===this.p&&!this.options.infinite)return void(this._drag_blocked=!0);if(this._drag_blocked=!1,window.addEventListener("touchmove",a,{passive:!1}),Math.abs(e)>5&&(1!==this.p||this.options.infinite))return t.preventDefault(),t.stopPropagation(),this._drag_ended=!0,this._swiped=!0,this.curr_px=0,this._setTransitionDuration(0),void this.swipePrev();var n=i;this.animate_px(n)}},onDragStart:function(t){this._drag_ended=!1,this._setTransitionDuration(0)},onDragEnd:function(t){this._drag_ended=!0,this._setTransitionDuration(this.options.transition_ms),this._swiped||this.animate(),this._swiped=!1,window.removeEventListener("touchmove",a,{passive:!1})},onSwipeTotal:function(e,i){var n=this;this.total!==i&&(this.total=i,this.p>this.total&&(this.p=this.total),this.getWidth(!0),this.offset=0,this.animate(),this.$target.each(function(e){t(this).css("left",n.getWidth(!0)*(n.offset+e)+"px")}))},onSwipePage:function(t,e){this._drag_blocked=!1,e<1||e>this.total||(this.p=e,this.animate())},onWindowResize:function(t){var e=this;setTimeout(function(){e.getWidth()!==e.getWidth(!0)&&(e.$target_wrap.addClass("infinite-swipe-resizing"),e.animate(0,function(){e.$target_wrap.removeClass("infinite-swipe-resizing")}))},200)},addListeners:function(){var e=this,i="touchstart click";navigator.userAgent.indexOf("Android")>=0&&(i="touchstart"),this.options.$prev&&this.options.$prev.on(i,t.proxy(this.onPrev,this)),this.options.$next&&this.options.$next.on(i,t.proxy(this.onNext,this)),this._dragleft_event=function(){e.onDragLeft.apply(e,arguments)},this._dragright_event=function(){e.onDragRight.apply(e,arguments)},this._dragstart_event=function(){e.onDragStart.apply(e,arguments)},this._dragend_event=function(){e.onDragEnd.apply(e,arguments)},this._swipetotal_event=function(){e.onSwipeTotal.apply(e,arguments)},this._swipepage_event=function(){e.onSwipePage.apply(e,arguments)},this.$el.on("dragleft",this._dragleft_event).on("dragright",this._dragright_event).on("dragstart",this._dragstart_event).on("dragend",this._dragend_event).on("swipe_total",this._swipetotal_event).on("swipe_page",this._swipepage_event),this._resize_event=function(){e.onWindowResize()},t(window).on("resize orientationchange",this._resize_event)},removeListeners:function(){var e="touchstart click";navigator.userAgent.indexOf("Android")>=0&&(e="touchstart"),this.options.$prev&&this.options.$prev.off(e,t.proxy(this.onPrev,this)),this.options.$next&&this.options.$next.off(e,t.proxy(this.onNext,this)),this.$el.off("dragleft",this._dragleft_event).off("dragright",this._dragright_event).off("dragstart",this._dragstart_event).off("dragend",this._dragend_event).off("swipe_total",this._swipetotal_event).off("swipe_page",this._swipepage_event),t(window).off("resize orientationchange",this._resize_event)},getWidth:function(t){return!t&&this._w||(this._w=this.options.getWidth?this.options.getWidth():this.$target.width()),this._w},swipePrev:function(){this.animate(-1)},swipeNext:function(){this.animate(1)},animate:function(e,i){var n=this,o=this.p;e&&(this.p+=e),this.curr_px>30?this.p--:this.curr_px<-30&&this.p++,this.options.infinite?(this.p===this.total+1?(this.p=1,this.offset++):0===this.p&&(this.p=this.total,this.offset--),this.$target.each(function(e){var i=n.getWidth(!0)*(n.offset+e-1);t(this).css("left",i+"px")})):this.p=Math.max(Math.min(this.p,this.total),1),this.curr_px=0;var a=-(this.p-1+this.offset*this.total)*this.getWidth(!0)/this.total;r(this.options.animation_type)(this.$target_wrap,a,this.options,this._drag_ended,this._drag_blocked),this.options.infinite||(this.options.$prev&&this.options.$prev.toggleClass("disabled",1===this.p),this.options.$next&&this.options.$next.toggleClass("disabled",this.p===this.total)),this.options.$curr&&this.options.$curr.text(this.p),o!=this.p&&this.options.onPage&&this.options.onPage(this.p),i&&setTimeout(i,this.options.transition_ms)},animate_px:function(t){this.curr_px=t;var e=-(this.p-1+this.offset*this.total)*this.getWidth()/this.total+t;r(this.options.animation_type)(this.$target_wrap,e,this.options,this._drag_ended,this._drag_blocked)},destroy:function(){this.$el.removeClass("infinite-swipe-stage"),this.$target_wrap.removeClass("infinite-swipe-target-wrap"),this.$target.filter(".infinite-swipe-target-clone").remove(),this.$el.find(".infinite-swipe-target").removeClass("infinite-swipe-target"),this.removeListeners(),this.options.autoswipe_seconds>0&&(this._as_timeout_id&&(clearTimeout(this._as_timeout_id),this._as_timeout_id=null),this.$el.off("mouseenter focusin",this._as_pause_event).off("mouseleave focusout",this._as_resume_event))},pause:function(){this._as_pause=!0},resume:function(){this._as_pause=!1,this._as_next()}},t.fn.infiniteSwipeEvent=function(){var e,i=t(this),n=!1,o=null,r={x:null,y:null},a={x:null,y:null};i.on("touchstart",function(t){var i=t.originalEvent.touches[0].pageX,s=t.originalEvent.touches[0].pageY;n=!0,o=null,r.x=a.x=i,r.y=a.y=s,e=t.timeStamp}).on("touchend touchleave",function(t){n&&"y"!==o&&i.trigger("dragend"),n=!1}).on("touchmove",function(t){if(n&&"y"!==o){var s=t.originalEvent.touches[0].pageX,d=t.originalEvent.touches[0].pageY,u={x:a.x-s,y:a.y-d};if(!o){if("y"==(o=Math.abs(u.x)>=Math.abs(u.y)?"x":"y"))return;i.trigger("dragstart")}var c=t.timeStamp-e,l={x:r.x-s,y:r.y-d},f=Math.abs(u.x/c);u.x>0?i.trigger("dragleft",[f,-l.x]):u.x<0&&i.trigger("dragright",[f,-l.x]),a.x=s,a.y=d,e=t.timeStamp}})},t.fn.infiniteSwipe=function(e,i){return this.each(function(){if("string"==typeof e){var n=t(this).data("infiniteswipe");n&&n[e](i)}else t(this).infiniteSwipeEvent(),t(this).data("infiniteswipe",new s(t(this),e))})}})},{jquery:"jquery"}],jquery:[function(t,e,i){e.exports=window.$},{}]},{},[20]);